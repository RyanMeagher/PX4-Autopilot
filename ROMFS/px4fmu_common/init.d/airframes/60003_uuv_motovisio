#!/bin/sh
#
# @name MotoVisio m5150
#
# @type Vectored 6 DOF UUV
# @class Underwater Robot
#
# @output MAIN1 motor 1 CCW, bow starboard horizontal, , propeller CCW
# @output MAIN2 motor 2 CCW, bow port horizontal, propeller CCW
# @output MAIN3 motor 3 CW, stern starboard horizontal, propeller CW
# @output MAIN4 motor 4 CW, stern port horizontal, propeller CW
# @output MAIN5 motor 5 CCW, bow starboard vertical, propeller CCW
# @output MAIN6 motor 6 CW, stern port vertical, propeller CW
#
# @maintainer Ryan Meagher <ryan@motovisio.com>
#
# @board px4_fmu-v2 exclude
# @board bitcraze_crazyflie exclude
#

. ${R}etc/init.d/rc.uuv_defaults

#Set data link loss failsafe mode (6: lockdown)
param set-default NAV_DLL_ACT 6

#Set RC loss failsafe mode (6: lockdown)
param set-default NAV_RCL_ACT 6
#set delay between rc loss and action
param set-default NAV_RCL_ACT_T 0

#set failsafe action for low battery (0: Warn)
param set-default COM_LOW_BAT_ACT 0

#set offboard link is lost under offboard control (4: lockdown)
param set-default COM_OBL_ACT 4

# disable circuit breaker for airspeed sensor
param set-default CBRK_AIRSPD_CHK 162128

# companion computer is connected via USB permanently
param set-default CBRK_USB_CHK 197848

#set this to 0 to enable safety_button
param set-default CBRK_IO_SAFETY 22027

# Allow running off 5V supply for testing
param set-default CBRK_SUPPLY_CHK 894281

# Use joystick
param set-default COM_RC_IN_MODE 1

param set-default COM_PREARM_MODE 0

param set-default MAV_1_CONFIG 102

param set-default BAT_N_CELLS 4

param set-default PWM_MAIN_MAX 1900
param set-default PWM_MAIN_MIN 1100
param set-default PWM_MAIN_DISARM 1500

set MAV_TYPE 12
set PWM_OUT 123456
#set PWM_OUT 1234
# set MIXER IO_pass
set MIXER vectored3dof